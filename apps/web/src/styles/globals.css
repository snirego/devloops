@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── Semantic color tokens ───────────────────────────────────────────────────
 * Define once here, use everywhere via Tailwind (`text-primary`, `text-muted`,
 * `ring-border`, etc.).  Change a value in one place and the whole app updates.
 * ────────────────────────────────────────────────────────────────────────── */
@layer base {
  :root {
    /* text */
    --color-text-primary: hsl(0deg 0% 9%);           /* light-1000 */
    --color-text-secondary: hsl(0deg 0% 56.1%);      /* light-800 */
    --color-text-tertiary: hsl(0deg 0% 78%);          /* light-700 */
    --color-text-muted: hsl(0deg 0% 85.9%);           /* light-600 */
    --color-text-placeholder: hsl(0deg 0% 78%);       /* light-700 */
    /* icon */
    --color-icon-default: hsl(0deg 0% 56.1%);         /* light-800 */
    --color-icon-muted: hsl(0deg 0% 88.6%);           /* light-500 */
    /* border / ring */
    --color-border: hsl(0deg 0% 85.9%);               /* light-600 */
    --color-border-focus: hsl(0deg 0% 78%);            /* light-700 */
    --color-ring: hsl(0deg 0% 85.9%);                 /* light-600 */
    --color-ring-focus: hsl(0deg 0% 78%);              /* light-700 */
  }

  .dark {
    /* text */
    --color-text-primary: #ededed;       /* dark-1000 */
    --color-text-secondary: #bbb;        /* dark-950 */
    --color-text-tertiary: #7e7e7e;      /* dark-900 */
    --color-text-muted: #707070;         /* dark-800 */
    --color-text-placeholder: #505050;   /* dark-700 */
    /* icon */
    --color-icon-default: #bbb;          /* dark-950 */
    --color-icon-muted: #707070;         /* dark-800 */
    /* border / ring */
    --color-border: #343434;             /* dark-500 */
    --color-border-focus: #3e3e3e;       /* dark-600 */
    --color-ring: #343434;               /* dark-500 */
    --color-ring-focus: #3e3e3e;         /* dark-600 */
  }
}

/* ── Brand color overrides ────────────────────────────────────────────────────
 * CSS variables are set at runtime:
 *   1. Blocking <script> in _document.tsx reads localStorage and sets them
 *      BEFORE the first paint (no flash of wrong color).
 *   2. WorkspaceProvider fetches the authoritative color from the DB and
 *      updates the vars + localStorage cache.
 *
 * Tailwind's color definitions in web.ts already include fallback values
 * inside var() (e.g. var(--brand-500, 99 102 241)), so the default indigo
 * works even if these CSS variables haven't been set yet.
 * ────────────────────────────────────────────────────────────────────────── */

[contenteditable="true"]:empty:before {
  content: attr(placeholder);
  display: block;
  color: #707070;
  font-size: 0.8rem;
}

.gradient-border::before {
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    transparent 45deg,
    rgba(244, 114, 182, 0.4) 85deg,
    rgba(192, 132, 252, 0.4) 95deg,
    transparent 110deg,
    transparent 360deg
  );
  content: "";
  position: absolute;
  inset: -50%;
  width: 200%;
  height: 200%;
}

@layer utilities {
  @supports not (overflow-wrap: anywhere) {
    .break-anywhere {
      word-break: break-word;
    }
  }

  @supports (overflow-wrap: anywhere) {
    .break-anywhere {
      overflow-wrap: anywhere;
    }
  }
}

/* Tippy.js tooltip theme */
.tippy-box[data-theme~="tooltip"] {
  @apply rounded-md border border-light-600 bg-white px-2 py-1 text-sm text-neutral-900 shadow-lg dark:border-dark-600 dark:bg-dark-100 dark:text-dark-1000;
}

.tippy-box[data-theme~="tooltip"] > .tippy-arrow::before {
  @apply border-t-light-600 dark:border-t-dark-600;
}

.tippy-box[data-theme~="tooltip"][data-placement^="bottom"]
  > .tippy-arrow::before {
  @apply border-b-light-600 dark:border-b-dark-600;
}

/* ── Disable browser autofill styling globally ───────────────────────────── */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active,
textarea:-webkit-autofill,
textarea:-webkit-autofill:hover,
textarea:-webkit-autofill:focus,
textarea:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 1000px transparent inset !important;
  -webkit-text-fill-color: inherit !important;
  transition: background-color 5000s ease-in-out 0s;
}
